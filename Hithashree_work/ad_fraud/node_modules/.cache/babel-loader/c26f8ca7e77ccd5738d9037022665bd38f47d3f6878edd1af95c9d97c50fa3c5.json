{"ast":null,"code":"let totalBehaviour = [];\nlet mousemoveTimes = [];\nlet mousemoveTotalBehaviour = [];\nconst sessionId = crypto.randomUUID();\nlet startTime;\nfunction startTracking() {\n  console.log(\"Tracking started for session:\", sessionId);\n  startTime = Date.now();\n  document.addEventListener(\"mousemove\", handleMousemove);\n  document.addEventListener(\"click\", handleClick);\n  document.addEventListener(\"contextmenu\", handleRightClick);\n  document.addEventListener(\"auxclick\", handleMiddleClick);\n}\nfunction endTracking() {\n  console.log(\"Ending tracking for session:\", sessionId);\n  const payload = {\n    session_id: sessionId,\n    total_behaviour: totalBehaviour,\n    mousemove_times: mousemoveTimes,\n    mousemove_total_behaviour: mousemoveTotalBehaviour\n  };\n\n  // Use `keepalive: true` so that fetch works on unload\n  fetch(\"http://localhost:5000/log-visit\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(payload),\n    keepalive: true\n  }).then(res => {\n    if (!res.ok) {\n      console.error(\"❌ Failed to send tracking data:\", res.statusText);\n    } else {\n      console.log(\"✅ Sent tracking data\");\n    }\n  }).catch(err => {\n    console.error(\"❌ Error sending tracking data:\", err);\n  });\n}\nfunction handleMousemove(e) {\n  const now = Date.now();\n  totalBehaviour.push(`m(${e.clientX},${e.clientY})`);\n  mousemoveTotalBehaviour.push({\n    x: e.clientX,\n    y: e.clientY\n  });\n  mousemoveTimes.push(now - startTime);\n}\nfunction handleClick() {\n  mousemoveTimes.push(Date.now() - startTime);\n  totalBehaviour.push(\"c(l)\");\n}\nfunction handleRightClick() {\n  mousemoveTimes.push(Date.now() - startTime);\n  totalBehaviour.push(\"c(r)\");\n}\nfunction handleMiddleClick() {\n  mousemoveTimes.push(Date.now() - startTime);\n  totalBehaviour.push(\"c(m)\");\n}\nexport { startTracking, endTracking };","map":{"version":3,"names":["totalBehaviour","mousemoveTimes","mousemoveTotalBehaviour","sessionId","crypto","randomUUID","startTime","startTracking","console","log","Date","now","document","addEventListener","handleMousemove","handleClick","handleRightClick","handleMiddleClick","endTracking","payload","session_id","total_behaviour","mousemove_times","mousemove_total_behaviour","fetch","method","headers","body","JSON","stringify","keepalive","then","res","ok","error","statusText","catch","err","e","push","clientX","clientY","x","y"],"sources":["C:/Users/hitha/Desktop/adfraud_kpmg/ad_fraud/src/clickceaseTracker.js"],"sourcesContent":["let totalBehaviour = [];\r\nlet mousemoveTimes = [];\r\nlet mousemoveTotalBehaviour = [];\r\nconst sessionId = crypto.randomUUID();\r\n\r\nlet startTime;\r\n\r\nfunction startTracking() {\r\n  console.log(\"Tracking started for session:\", sessionId);\r\n  startTime = Date.now();\r\n\r\n  document.addEventListener(\"mousemove\", handleMousemove);\r\n  document.addEventListener(\"click\", handleClick);\r\n  document.addEventListener(\"contextmenu\", handleRightClick);\r\n  document.addEventListener(\"auxclick\", handleMiddleClick);\r\n}\r\n\r\nfunction endTracking() {\r\n  console.log(\"Ending tracking for session:\", sessionId);\r\n\r\n  const payload = {\r\n    session_id: sessionId,\r\n    total_behaviour: totalBehaviour,\r\n    mousemove_times: mousemoveTimes,\r\n    mousemove_total_behaviour: mousemoveTotalBehaviour\r\n  };\r\n\r\n  // Use `keepalive: true` so that fetch works on unload\r\n  fetch(\"http://localhost:5000/log-visit\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify(payload),\r\n    keepalive: true\r\n  }).then(res => {\r\n    if (!res.ok) {\r\n      console.error(\"❌ Failed to send tracking data:\", res.statusText);\r\n    } else {\r\n      console.log(\"✅ Sent tracking data\");\r\n    }\r\n  }).catch(err => {\r\n    console.error(\"❌ Error sending tracking data:\", err);\r\n  });\r\n}\r\n\r\nfunction handleMousemove(e) {\r\n  const now = Date.now();\r\n  totalBehaviour.push(`m(${e.clientX},${e.clientY})`);\r\n  mousemoveTotalBehaviour.push({ x: e.clientX, y: e.clientY });\r\n  mousemoveTimes.push(now - startTime);\r\n}\r\n\r\nfunction handleClick() {\r\n  mousemoveTimes.push(Date.now() - startTime);\r\n  totalBehaviour.push(\"c(l)\");\r\n}\r\nfunction handleRightClick() {\r\n  mousemoveTimes.push(Date.now() - startTime);\r\n  totalBehaviour.push(\"c(r)\");\r\n}\r\nfunction handleMiddleClick() {\r\n  mousemoveTimes.push(Date.now() - startTime);\r\n  totalBehaviour.push(\"c(m)\");\r\n}\r\n\r\nexport { startTracking, endTracking };\r\n"],"mappings":"AAAA,IAAIA,cAAc,GAAG,EAAE;AACvB,IAAIC,cAAc,GAAG,EAAE;AACvB,IAAIC,uBAAuB,GAAG,EAAE;AAChC,MAAMC,SAAS,GAAGC,MAAM,CAACC,UAAU,CAAC,CAAC;AAErC,IAAIC,SAAS;AAEb,SAASC,aAAaA,CAAA,EAAG;EACvBC,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEN,SAAS,CAAC;EACvDG,SAAS,GAAGI,IAAI,CAACC,GAAG,CAAC,CAAC;EAEtBC,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAEC,eAAe,CAAC;EACvDF,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAEE,WAAW,CAAC;EAC/CH,QAAQ,CAACC,gBAAgB,CAAC,aAAa,EAAEG,gBAAgB,CAAC;EAC1DJ,QAAQ,CAACC,gBAAgB,CAAC,UAAU,EAAEI,iBAAiB,CAAC;AAC1D;AAEA,SAASC,WAAWA,CAAA,EAAG;EACrBV,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEN,SAAS,CAAC;EAEtD,MAAMgB,OAAO,GAAG;IACdC,UAAU,EAAEjB,SAAS;IACrBkB,eAAe,EAAErB,cAAc;IAC/BsB,eAAe,EAAErB,cAAc;IAC/BsB,yBAAyB,EAAErB;EAC7B,CAAC;;EAED;EACAsB,KAAK,CAAC,iCAAiC,EAAE;IACvCC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACV,OAAO,CAAC;IAC7BW,SAAS,EAAE;EACb,CAAC,CAAC,CAACC,IAAI,CAACC,GAAG,IAAI;IACb,IAAI,CAACA,GAAG,CAACC,EAAE,EAAE;MACXzB,OAAO,CAAC0B,KAAK,CAAC,iCAAiC,EAAEF,GAAG,CAACG,UAAU,CAAC;IAClE,CAAC,MAAM;MACL3B,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;IACrC;EACF,CAAC,CAAC,CAAC2B,KAAK,CAACC,GAAG,IAAI;IACd7B,OAAO,CAAC0B,KAAK,CAAC,gCAAgC,EAAEG,GAAG,CAAC;EACtD,CAAC,CAAC;AACJ;AAEA,SAASvB,eAAeA,CAACwB,CAAC,EAAE;EAC1B,MAAM3B,GAAG,GAAGD,IAAI,CAACC,GAAG,CAAC,CAAC;EACtBX,cAAc,CAACuC,IAAI,CAAC,KAAKD,CAAC,CAACE,OAAO,IAAIF,CAAC,CAACG,OAAO,GAAG,CAAC;EACnDvC,uBAAuB,CAACqC,IAAI,CAAC;IAAEG,CAAC,EAAEJ,CAAC,CAACE,OAAO;IAAEG,CAAC,EAAEL,CAAC,CAACG;EAAQ,CAAC,CAAC;EAC5DxC,cAAc,CAACsC,IAAI,CAAC5B,GAAG,GAAGL,SAAS,CAAC;AACtC;AAEA,SAASS,WAAWA,CAAA,EAAG;EACrBd,cAAc,CAACsC,IAAI,CAAC7B,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGL,SAAS,CAAC;EAC3CN,cAAc,CAACuC,IAAI,CAAC,MAAM,CAAC;AAC7B;AACA,SAASvB,gBAAgBA,CAAA,EAAG;EAC1Bf,cAAc,CAACsC,IAAI,CAAC7B,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGL,SAAS,CAAC;EAC3CN,cAAc,CAACuC,IAAI,CAAC,MAAM,CAAC;AAC7B;AACA,SAAStB,iBAAiBA,CAAA,EAAG;EAC3BhB,cAAc,CAACsC,IAAI,CAAC7B,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGL,SAAS,CAAC;EAC3CN,cAAc,CAACuC,IAAI,CAAC,MAAM,CAAC;AAC7B;AAEA,SAAShC,aAAa,EAAEW,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}